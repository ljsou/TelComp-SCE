<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>TODO supply a title</title>
    </h:head>
    <h:body>
        <h2>Table test</h2>

        <h:form id="form">
            <p:dataTable id="dataMappingTable" value="#{pruebasManagedBean.sourceDataElements}" var="dataAssociation" 
                         selectionMode="multiple" selection="#{pruebasManagedBean.selectedSource}" rowKey="#{dataAssociation}" 
                         style="width:410px; font-size: 15px;">;
                <f:facet name="header">  
                    Data mapping  
                </f:facet>  

                <p:column headerText="Source" style="width:300px;">  
                    #{dataAssociation.dataElementName} (#{dataAssociation.dataType}) 
                </p:column> 
                <p:column headerText="Target" style="width:350px;">  
                    <p:selectOneMenu value="#{pruebasManagedBean.selectedTarget}" effect="fade" >  
                        <f:selectItem itemLabel="Select One" itemValue="" />  
                        <f:selectItems value="#{pruebasManagedBean.targetDataElements}" var="dataElementTarget" itemLabel="#{dataElementTarget.dataElementName} (#{dataElementTarget.dataType})" itemValue="#{dataElementTarget.dataElementName}"/>  
                    </p:selectOneMenu>   
                </p:column> 

                <f:facet name="footer">  
                    <p:commandButton value="Submit" icon="ui-icon-circle-triangle-e"  
                                     update=":form:display" oncomplete="dataDialog.show()" action="#{pruebasManagedBean.createAssociation()}"
                                     style="height: 30px; font-size: 13px;"/>  
                </f:facet> 
            </p:dataTable>

            <p:dialog header="Defined data mapping" widgetVar="dataDialog"  
                      width="400" showEffect="explode" hideEffect="fade" modal="true">
                <p:ajax event="close" listener="#{pruebasManagedBean.setSelectedTargets()}"/>  
                <p:dataTable id="display" value="#{pruebasManagedBean.associations}" var="dataAssociationTest" 
                             style="width:350px; font-size: 15px;">;
                    <p:column headerText="Source" style="width:300px;">  
                        #{dataAssociationTest.sourceData.dataElementName}  
                    </p:column> 
                    <p:column headerText="Target" style="width:300px;">  
                        #{dataAssociationTest.targetData.dataElementName}  
                    </p:column> 
                </p:dataTable>
                <f:facet name="footer">  
                    <p:commandButton value="I Agree" icon="ui-icon-circle-check"  
                                     oncomplete="dataDialog.hide()" action="#{pruebasManagedBean.setSelectedTargets()}"
                                     style="height: 30px; font-size: 13px;"/>  
                    <p:commandButton value="Cancel" icon="ui-icon-alert"  
                                     oncomplete="dataDialog.hide()" action="#{pruebasManagedBean.setSelectedTargets()}"
                                     style="height: 30px; font-size: 13px;"/>  
                </f:facet> 
            </p:dialog> 
        </h:form>   

    </h:body>
</html>
